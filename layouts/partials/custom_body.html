<script>
function toggleTheme() {
  const body = document.body;
  const currentTheme = body.getAttribute('data-theme') || 'light';
  const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
  
  body.setAttribute('data-theme', newTheme);
  localStorage.setItem('theme', newTheme);
  
  // Update button icon
  const button = document.querySelector('.theme-toggle');
  if (button) {
    button.textContent = newTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
  }
}

function initializeTheme() {
  const savedTheme = localStorage.getItem('theme') || 'light';
  document.body.setAttribute('data-theme', savedTheme);
  
  // Update button icon and add event listener
  const button = document.querySelector('.theme-toggle');
  if (button) {
    button.textContent = savedTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
    button.addEventListener('click', toggleTheme);
  } else {
    // Retry if button not found yet
    setTimeout(initializeTheme, 100);
  }
}

// Initialize theme - try multiple DOM ready states
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initializeTheme);
} else {
  initializeTheme();
}
</script>