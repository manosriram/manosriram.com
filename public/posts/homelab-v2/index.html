<!DOCTYPE html>
<html lang="en-us">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="http://localhost:1313/favicon.svg" />
<title>Getting serious with home server and self-hosting | Mano Sriram</title>
<meta name="title" content="Getting serious with home server and self-hosting" />
<meta name="description" content="Homelab V2" />
<meta name="keywords" content="" />


<meta property="og:url" content="http://localhost:1313/posts/homelab-v2/">
  <meta property="og:site_name" content="Mano Sriram">
  <meta property="og:title" content="Getting serious with home server and self-hosting">
  <meta property="og:description" content="Homelab V2">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-07-27T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-07-27T00:00:00+00:00">




  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Getting serious with home server and self-hosting">
  <meta name="twitter:description" content="Homelab V2">




  <meta itemprop="name" content="Getting serious with home server and self-hosting">
  <meta itemprop="description" content="Homelab V2">
  <meta itemprop="datePublished" content="2025-07-27T00:00:00+00:00">
  <meta itemprop="dateModified" content="2025-07-27T00:00:00+00:00">
  <meta itemprop="wordCount" content="2122">
<meta name="referrer" content="no-referrer-when-downgrade" />

  <style>
  :root {
    --width: 720px;
    --font-main: Verdana, sans-serif;
    --font-secondary: Verdana, sans-serif;
    --font-scale: 1em;
  }

  [data-theme="light"], :root {
    --background-color: #fff;
    --heading-color: #222;
    --text-color: #444;
    --link-color: #3273dc;
    --visited-color: #8b6fcb;
    --code-background-color: #000;
    --code-color: #fff;
    --blockquote-color: #222;
  }

  [data-theme="dark"] {
    --background-color: #01242e;
    --heading-color: #eee;
    --text-color: #ddd;
    --link-color: #8cc2dd;
    --visited-color: #8b6fcb;
    --code-background-color: #1a1a1a;
    --code-color: #f8f8f2;
    --blockquote-color: #ccc;
  }

  body {
    font-family: var(--font-secondary);
    font-size: var(--font-scale);
    margin: auto;
    padding: 20px;
    max-width: var(--width);
    text-align: left;
    background-color: var(--background-color);
    word-wrap: break-word;
    overflow-wrap: break-word;
    line-height: 1.5;
    color: var(--text-color);
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: var(--font-main);
    color: var(--heading-color);
  }

  a {
    color: var(--link-color);
    cursor: pointer;
    text-decoration: none;
  }

  a:hover {
    text-decoration: underline;
  }

  nav {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  nav a {
    margin-right: 8px;
  }

  .theme-toggle {
    background: none;
    border: 1px solid var(--text-color);
    color: var(--text-color);
    padding: 4px 8px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
    margin-left: auto;
    transition: all 0.3s ease;
  }

  .theme-toggle:hover {
    background-color: var(--text-color);
    color: var(--background-color);
  }

  strong,
  b {
    color: var(--heading-color);
  }

  button {
    margin: 0;
    cursor: pointer;
  }

  time {
    font-family: monospace;
    font-style: normal;
    font-size: 15px;
  }

  main {
    line-height: 1.6;
  }

  table {
    width: 100%;
  }

  hr {
    border: 0;
    border-top: 1px dashed;
  }

  img {
    max-width: 100%;
  }

  code {
    font-family: monospace;
    padding: 2px 4px;
    background-color: var(--code-background-color);
    color: var(--code-color);
    border-radius: 3px;
    font-size: 1em;
  }

  blockquote {
    border-left: 1px solid #999;
    color: var(--blockquote-color);
    padding-left: 20px;
    font-style: italic;
  }

  footer {
    padding: 25px 0;
    text-align: center;
  }

  .title:hover {
    text-decoration: none;
  }

  .title h1 {
    font-size: 1.5em;
  }

  .inline {
    width: auto !important;
  }

  .highlight,
  .code,
  pre {
    padding: 5px;
    color: var(--code-color);
    border-radius: 3px;
    margin-block-start: 1em;
    margin-block-end: 1em;
    overflow-x: auto;
    font-family: 'Courier New', monospace;
    font-size: 1.1em;
    line-height: 1.4;
  }

  pre code {
    background-color: transparent;
    padding: 0;
    border-radius: 0;
    font-size: inherit;
  }

   
  ul.blog-posts {
    list-style-type: none;
    padding: unset;
  }

  ul.blog-posts li {
    display: flex;
  }

  ul.blog-posts li span {
    flex: 0 0 130px;
  }

  ul.blog-posts li a:visited {
    color: var(--visited-color);
  }

</style>

</head>

<body>
  <header><a href="/" class="title">
  <h2>Mano Sriram</h2>
</a>
<nav>
<a href="/">home</a>

<a href="/posts/">blog</a>

<a href="/resume.pdf">resume</a>

<button class="theme-toggle" aria-label="Toggle dark mode">üåô</button></nav>
</header>
  <main>

<content>
  <p>In one of my last <a href="https://manosriram.com/posts/homelab/">posts</a>, I was getting started with a home server using a Raspberry PI 4. Since then, I have upgraded the setup and the hardware as well.</p>
<p>The RPi had 8GB of RAM, but it was not very stable for a home server. By stability, I mean: stable storage, faster RAM, faster processor, more ports, etc Since starting with the home server with RPi, I wanted to have some regularly used services rather than just hosting whatever I like. For example, in the last post, I said I hosted memos for note-taking, but it didn&rsquo;t work. I didn&rsquo;t see myself using it very much (not at all, actually). I understood that this is kind of a trial-and-error method, but I need to have a few services that I actually use regularly.</p>
<p>I wrote down the ones which I would actually need in order to de-google (inspired by <a href="https://www.youtube.com/watch?v=u_Lxkt50xOg">PewDiePie</a> and <a href="https://www.youtube.com/watch?v=YnSv8ylLfPw">Linus</a> - I still cannot believe PDP is into self-hosting and Linux).</p>
<ol>
<li>
<p><strong>Photos management</strong>: My wife loves taking photos, and multiple photos of same and different poses. So, of-course the media storage is growing exponentially. Self-hosting photos is a challenging task, the harder parts being having a backup of photos, photos being easily accessible, and sync with the native photos app.</p>
<p>All of the photos were previously on iCloud. So, the service</p>
<ul>
<li>
<p>Needs to have an iOS app to sync whatever photos I take on my iPhone.</p>
</li>
<li>
<p>Needs to be fast.</p>
</li>
</ul>
<p>I then found <a href="https://github.com/immich-app/immich">Immich</a>, which ticked both the above boxes. Although it&rsquo;s still in very early stages, I was ok with that after trying it once.</p>
<p>When I tried running immich with all other services, RPi was starting to struggle, which I think might be mainly because of the ML sidecar it provides to recognize faces. With the new hardware, I think Immich is one of the best tools for this job.</p>
</li>
<li>
<p><strong>Media management</strong>: A Few days back, I was watching a movie on Prime, and an Ad suddenly appeared out of nowhere. I was surprised since I have paid Amazon for Prime Video, and now I am getting ads? After further investigation, I came to know they have introduced Ads that we have to pay extra to get rid of. This triggered me a bit, and since I was already thinking of self-hosting, I decided this will definitely be on my to-do list.</p>
<h4 id="the-arr-stack"><strong>The ARR stack</strong></h4>
<p>This is a popular stack among self-hosters. This stack helps one find and download movies easily with the help of a torrent client. This stack (mainly) consists of:</p>
<ul>
<li>
<p><a href="https://github.com/Sonarr/Sonarr">Sonarr</a>: Tv show manager</p>
</li>
<li>
<p><a href="https://github.com/Radarr/Radarr">Radarr</a>: Movie manager</p>
</li>
<li>
<p><a href="https://github.com/Prowlarr/Prowlarr">Prowlarr</a>: Indexers to get torrents from</p>
</li>
<li>
<p><a href="https://github.com/morpheus65535/bazarr">Bazarr</a>: Subtitles manager</p>
</li>
</ul>
<p>For the download client, I use <a href="https://github.com/linuxserver/docker-deluge">deluge</a>. The flow looks something like - User adds a list of indexers to use in Prowlarr, then the user searches for TV shows/movies in Sonarr/Radarr, and downloads the specific media, which adds the torrent to the connected download client. The download client then finished downloading, Sonarr/Radarr then picks it up and puts the downloaded media in a specific directory (more on this later). If the subtitles aren&rsquo;t downloaded or you are not satisfied with the subs, you can request Bazarr for subs, and it downloads and puts them into the media directory where the movie is located.</p>
<p>Jellyfin is the main service where TV shows or Movies are viewed. Both Sonarr and Radarr mount the Jellyfin path as a Docker service. When the media is downloaded, it is immediately moved to the Jellyfin-mounted path, which is then used by Jellyfin.</p>
</li>
<li>
<p><strong>Drive replacement</strong>: There are multiple reasons to not use <a href="https://drive.google.com">drive</a>:</p>
<ul>
<li>
<p>Monthly subscription for higher storage (which is fair, but still, I didn&rsquo;t want to keep paying)</p>
</li>
<li>
<p>No data privacy with Google - Google scans all the files, and I didn&rsquo;t want that, especially with the rise of AI.</p>
</li>
</ul>
<p>I was looking into Filestash, which has a decent shareability feature. It was good for short-term data storage for me, but for the long term, it was the right choice. I still have Filestash running, but just for media viewing.</p>
<p>Also tried NextCloud, it&rsquo;s very bulky and slow and written in PHP (which isn&rsquo;t bad in itself, but for this use case, I wanted something fast)</p>
<h4 id="seafile"><strong>Seafile</strong></h4>
<p>I decided to go with <a href="https://github.com/haiwen/seafile">Seafile</a>. To start with, it&rsquo;s really fast and has an iOS app as well, which is great. Also has great user management and many other options.</p>
<p>The only thing I was thinking before starting to use Seafile was the <a href="https://manual.seafile.com/11.0/develop/data_model/">way it stores data</a>. It does not store the media directly, but it breaks the data into pieces and stores them. This has its own pros and cons:</p>
<ul>
<li>
<p>Duplicate files don&rsquo;t take extra space. Since it&rsquo;s being hashed (git like), it&rsquo;s easy to find duplicates.</p>
</li>
<li>
<p>It&rsquo;s very hard to migrate data from Seafile. Seafile gives a Fuse option to mount it as a drive. Still, it&rsquo;s very hard to directly migrate the data without Seafile&rsquo;s initial dependency.</p>
</li>
</ul>
<p>For me, this was OK. Since my main goal was to have a stable service and for it to be fast. Seafile does both, and does it very well. So, I did go with Seafile, which I did not regret (at least until now). I even tried <a href="https://github.com/paperless-ngx/paperless-ngx">PaperlessNgx</a>, but it still didn&rsquo;t fit for me.</p>
<p>In order to share links, I had to make this service publicly exposed. Did that using Cloudflare tunnels to make this process a bit safer.</p>
</li>
<li>
<p><strong>Password management</strong>: I was very skeptical of self-hosted password managers, mainly because of any error from my side and not being able to access the passwords. I still went with Vaultwarden when using RPi and still don&rsquo;t regret that. Although with RPi, I didn&rsquo;t really use the password manager that well. Now, I have been actively using it for every site I visit, and even to generate random passwords.</p>
</li>
</ol>
<p>The case that I was worried about didn&rsquo;t even exist since I can read the passwords from <a href="https://github.com/dani-garcia/vaultwarden">Vaultwarden</a> even when the home server is down, I can only not write to it, which seems fair. This motivates me to follow a proper setup and decrease downtime (importantly, when I&rsquo;m not at home), which I call <strong>Downtime Discipline</strong>.</p>
<p>I get this beautiful autocomplete, which is self-hosted on my server. Knowing that the data is safe with you gives you a greater level of satisfaction than something that any privately owned company promises.</p>
<p><img src="/img/vw-autocomplete-before.png" alt="Vaultwarden before autocomplete"></p>
<p><img src="/img/vw-autocomplete-after.png" alt="Vaultwarden after autocomplete"></p>
<ol start="5">
<li><strong>YouTube archivals</strong>: I wanted to keep a copy of any YouTube video that I feel is great (and videos which might be taken down for some reason), hence archiving YouTube videos is a concept of its own. <a href="https://github.com/tubearchivist/tubearchivist">TubeArchivist</a> is a great self-hostable tool to download videos. Every tool of this kind is a yt-dl wrapper.</li>
</ol>
<p>I have an unlisted playlist for this setup. I can just add videos to that playlist and rescan the library in Tubearchivist, which should download the added videos. It&rsquo;s a great tool that I don&rsquo;t always use, but still sometimes serves my use case.</p>
<ol start="6">
<li><strong>Bookmarks Manager</strong>: I used to manage bookmarks with my browser (Brave) itself, and I didn&rsquo;t use the same browser on my phone. Bookmarking was something I always wanted to have a solution for myself, but I was too lazy to solve it. Since I had a need, I looked out for options in the market. Found <a href="https://github.com/sissbruecker/linkding">Linkding</a> to be a very nice solution for me.</li>
</ol>
<p>It even has an iOS app (unofficial), which is pretty nice. Bookmarking is not just saving links but also saving the content inside the links since the site may go down at some point, and I don&rsquo;t want my bookmarks to point at dead links. Linkding automatically archives websites, either as a local HTML file or on the Internet Archive.</p>
<p>I still use Nginx-Proxy-Manager for routing subdomains to respective ports with https certs.</p>
<h3 id="hardware-specs">Hardware specs</h3>
<p><img src="/img/homelab.png" alt="Lenovo M720s"></p>
<p>The RPi I used had 8GB RAM and an ARM processor. I was running headless Raspbian on it, which was light enough to keep it running. Since I have gotten serious with home servers, I needed a real computer (not a new one necessarily).</p>
<p>I did not want it to be very bulky since it might take up a lot of power. After searching for a few days on the internet, I found a few used small form factor PCs specifically <a href="https://www.lenovo.com/us/en/p/desktops/thinkcentre/m-series-sff/thinkcentre-m720s/11tc1mdm72s">Lenovo M720s</a>. It had 4 RAM slots, 128 GB NVMe SSD, Intel i5 9th gen 4.4Ghz processor. I filled up the RAM slots with 16 x 4 cards totaling 64GB. I also bought an <a href="https://www.amazon.in/Portable-Protection-Compatible-Warranty-SDSSDE30-1T00-G26/dp/B0C5JQ68FY/ref=sr_1_3?crid=3MGAXW9Z2F5XJ&amp;dib=eyJ2IjoiMSJ9.eZP7c-vCKIrBgcXcXdbtQB4gxqUQqgJu7uAgSJzA7xJuobkH_E8OpmUsrp_Ij4ugJpCKpdMtGTO4MHonhLfqEA6Kh80Jlsqxpz-4F0fnMtjjdN8KhR-RCWFtY__nkwuYyWFa5B6WqUQGS6K66LGCUtO_nSBEcf8xkUW-L7pzUrP4rxH4EIt1zFyuukrEqtcu9XpNFoWtQvqWwfuEq8z01faI275mD83ofCGEVA2XfJs.Y597H5sV3CORZ-vAJasKnsAVYcIEf6WueVMYrzIfBZE&amp;dib_tag=se&amp;keywords=ssd+1tb&amp;qid=1753614927&amp;sprefix=ssd+1%2Caps%2C289&amp;sr=8-3">1TB external SSD (bought the next version of this ssd)</a> (not sure if external is the perfect choice, but it works great!)</p>
<p>I came with Windows! The first thing I did after bringing it home was remove Windows and install headless Debian on it.</p>
<h3 id="monitoring">Monitoring</h3>
<p>The goal of monitoring is to know if any service is down or if the homelab itself is down. It was quite tricky since this is all happening inside a local network; it&rsquo;s not possible for me to know if my lab is down.</p>
<p>Now, the notification center is slack. I created a new Slack account and a couple of channels in it to be notified.</p>
<p>I decided to go with 2 parts:</p>
<ul>
<li>
<p>Service monitoring: <a href="https://github.com/TwiN/gatus">Gatus</a> pings all services in intervals and sends a notification to the Slack channel when any service doesn&rsquo;t respond with a 200 code after 3 attempts.</p>
<p>Previously, I used <a href="https://github.com/louislam/uptime-kuma">Uptime-kuma</a> for this (without the notifications). The problem with uptime-kuma is that it does not run on a config file. Everything must be done via the GUI, which I did not like at all.</p>
<p><img src="/img/gatus.png" alt="z"></p>
</li>
<li>
<p>Lab monitoring: All services are now being monitored except Gatus (lol). I would not know if Gatus went down. To solve this, I added a check to ping for a healthchecks.io monitor every 15 minutes with a grace period of an extra 15 minutes.</p>
</li>
</ul>
<p>If healthchecks.io doesn&rsquo;t receive the request within that time, it sends a notification to the Slack channel as well as an email.</p>
<p>I was using <a href="https://github.com/binwiederhier/ntfy">ntfy</a> before trying this flow, but I didn&rsquo;t want to self-host a notification service for some reason.</p>
<p>Also, I have <a href="https://manpages.debian.org/jessie/ufw/ufw.8.en.html">ufw</a> enabled with limited ports open for the services that are running. I have a file with a list of port numbers. I run a script to add them to UFW. So, whenever I create a new service, I have to add the port via the script. Otherwise, it just won&rsquo;t allow the requests to come in.</p>
<h3 id="backups">Backups</h3>
<p>This was a very critical process and needed a flow that I could rely on. First, I needed to store the backups somewhere. AWS was good, but felt a little pricier since I just want cold storage. Then, I looked at <a href="https://www.backblaze.com/cloud-storage">Backblaze B2</a>, and it fit perfectly. B2 charges about 0.001$/GB.</p>
<p>The idea is to run a daily backup job and a monthly backup job. <a href="https://github.com/restic/restic">Restic</a> was a great tool for this kind of process.</p>
<p>The con, which I said for Seafile, ie, it hashes and stores the files, so it&rsquo;s easier to see duplicate files; Restic follows the same process here, which turns out to be a huge advantage.</p>
<p>Whenever I run a backup, after the initial backup, it only writes the new changes, and the old ones aren&rsquo;t rewritten.</p>
<p>I run 2 cron jobs, one for daily and another for monthly. Every day at 8 am, a daily backup job is run. Every 1st day of the month, the monthly backup job is run.</p>
<p>I run the restic backup command with a daily/monthly tag to differentiate between them. After running, I run the <code>forget</code> command, with flags <code>--tag daily</code> <code>--keep-daily 30</code>. This keeps the last 30days&rsquo; backup. For the monthly backup, <code>--tag monthly</code> <code>--keep-monthly 1</code> does the job.</p>
<p>All of this is done by interacting with the B2 cloud. Both the cron job pings healthchecks.io after finishing the job. If any job doesn&rsquo;t run on schedule, I get a Slack message saying so.</p>
<p>This is not exactly the 3-2-1 backup strategy, but this is safe enough for me (at least for now).</p>
<p><img src="/img/healthchecksio.png" alt="Screenshot of healthchecksio dashboard"></p>
<p><img src="/img/restic.png" alt="Screenshot of restic snapshots listing"></p>
<p>All of this setup from scratch would not be possible without the help of the subreddits referenced below. There are a lot of articles and helpful people who write about their setup and best practices
to follow. I cannot thank these anonymous people enough.</p>
<p>I try to explain all of this homelab setup to my non-tech wife, she cares deeply so she nods along, but I‚Äôm pretty sure she is just nodding so that I would stop talking about it.</p>
<p><img src="/img/blog-coffee.png" alt="Coffee shop"></p>
<p>Writing this from a coffee shop. Thanks for reading!</p>
<h4 id="references">References</h4>
<ul>
<li>
<p><a href="https://github.com/manosriram/homelab">github.com/manosriram/homelab</a></p>
</li>
<li>
<p><a href="https://manpages.debian.org/contents-bookworm.html">manpages.debian.org/contents-bookworm.html</a></p>
</li>
<li>
<p><a href="http://healthchecks.io/">healthchecks.io</a></p>
</li>
<li>
<p><a href="https://restic.readthedocs.io/en/stable/030_preparing_a_new_repo.html#backblaze-b2">Restic backblaze b2 support</a></p>
</li>
<li>
<p><a href="https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/">Cloudflare tunnels</a></p>
</li>
<li>
<p><a href="https://www.backblaze.com/blog/the-3-2-1-backup-strategy/">3-2-1 backup backblaze</a></p>
</li>
<li>
<h5 id="subreddits-rselfhosted-rdegoogle-rhomelab">Subreddits <a href="https://www.reddit.com/r/selfhosted/">r/selfhosted</a> <a href="https://www.reddit.com/r/degoogle/">r/degoogle</a> <a href="https://www.reddit.com/r/homelab/">r/homelab</a></h5>
</li>
</ul>

</content>
<p>
  
</p>

  </main>
  <footer>
</footer>

  <script>
function toggleTheme() {
  const body = document.body;
  const currentTheme = body.getAttribute('data-theme') || 'light';
  const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
  
  body.setAttribute('data-theme', newTheme);
  localStorage.setItem('theme', newTheme);
  
  
  const button = document.querySelector('.theme-toggle');
  if (button) {
    button.textContent = newTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
  }
}

function initializeTheme() {
  const savedTheme = localStorage.getItem('theme') || 'light';
  document.body.setAttribute('data-theme', savedTheme);
  
  
  const button = document.querySelector('.theme-toggle');
  if (button) {
    button.textContent = savedTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
    button.addEventListener('click', toggleTheme);
  } else {
    
    setTimeout(initializeTheme, 100);
  }
}


if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initializeTheme);
} else {
  initializeTheme();
}
</script></body>

</html>
